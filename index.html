<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态舆情可视化</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: #CEB5D4; /* 使用指定的背景颜色 */
        }
        h1 {
            color: #102B53; /* 主标题颜色 */
        }
        .container {
            display: flex;
            justify-content: space-around;
            margin: 50px;
        }
        .chart-container {
            width: 300px;
            height: 300px;
            position: relative;
        }
        .tooltip {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 5px;
            display: none;
            font-size: 12px;
        }
        .timeline {
            margin: 30px 0;
        }
        button {
            background-color: #50698D; /* 按钮背景色 */
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin: 0 10px;
        }
        button:hover {
            background-color: #4E7AB1; /* 按钮悬停颜色 */
        }
    </style>
</head>
<body>

<h1>媒体参与情况 - 百度开盒事件</h1>
<div class="timeline">
    <button onclick="updateData('initial')">初始曝光期</button>
    <button onclick="updateData('peak')">热议高峰期</button>
    <button onclick="updateData('official')">官方应对期</button>
    <button onclick="updateData('decline')">舆论回落期</button>
</div>

<div class="container">
    <!-- 各阶段的媒体圆环图 -->
    <div class="chart-container">
        <canvas id="centralMediaChart"></canvas>
        <div id="tooltip" class="tooltip"></div>
    </div>
    <div class="chart-container">
        <canvas id="industryMediaChart"></canvas>
        <div id="tooltip2" class="tooltip"></div>
    </div>
    <div class="chart-container">
        <canvas id="localMediaChart"></canvas>
        <div id="tooltip3" class="tooltip"></div>
    </div>
</div>

<script>
    const mediaData = {
        'initial': {
            'central': { 'count': 0, 'text': '' },
            'industry': { 'count': 0, 'text': '' },
            'local': { 'count': 2, 'text': '第一财经日报：【#谢广军称已严肃批评女儿行为#】' }
        },
        'peak': {
            'central': { 'count': 14, 'text': '中国新闻周刊：【#百度高管谢广军回应女儿事件#】' },
            'industry': { 'count': 2, 'text': '三联生活周刊：【#部分开盒挂人者仅仅为了宣泄情绪#】' },
            'local': { 'count': 60, 'text': '南方网：【#南方网评# “开盒者反被开盒”》' }
        },
        'official': {
            'central': { 'count': 10, 'text': '环球时报：【#百度通报副总裁女儿开盒事件#】' },
            'industry': { 'count': 2, 'text': '中国经营报：【#百度回应谢广军女儿开盒#】' },
            'local': { 'count': 71, 'text': '北京日报：#开盒风波后百度解答疑虑#' }
        },
        'decline': {
            'central': { 'count': 4, 'text': '中国青年网：【网暴事件频发背后-#谁在喂养开盒挂人数据库#】' },
            'industry': { 'count': 2, 'text': '中国妇女报：【#百度公布开盒事件详细调查过程#】' },
            'local': { 'count': 37, 'text': '新黄河：【#内部人士回应传百度谢广军提离职#】' }
        }
    };

    let centralMediaChart, industryMediaChart, localMediaChart;

    function updateData(stage) {
        const data = mediaData[stage];

        // 更新圆环图数据
        centralMediaChart.data.datasets[0].data = [data.central.count, 18 - data.central.count];
        centralMediaChart.update();

        industryMediaChart.data.datasets[0].data = [data.industry.count, 4 - data.industry.count];
        industryMediaChart.update();

        localMediaChart.data.datasets[0].data = [data.local.count, 127 - data.local.count];
        localMediaChart.update();

        // 更新文本显示
        document.getElementById('tooltip').textContent = `央级媒体：${data.central.text}`;
        document.getElementById('tooltip2').textContent = `行业媒体：${data.industry.text}`;
        document.getElementById('tooltip3').textContent = `地方媒体：${data.local.text}`;
    }

    function createChart(canvasId, data, label) {
        const ctx = document.getElementById(canvasId).getContext('2d');
        return new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['参与媒体', '其他'],
                datasets: [{
                    label: label,
                    data: [data.count, 18 - data.count],
                    backgroundColor: ['#4E7AB1', '#7D9FC0'], // 使用指定的色系
                    borderColor: '#ffffff',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    tooltip: {
                        enabled: false
                    }
                },
                animation: {
                    animateScale: true
                },
                onHover: (event, chartElement) => {
                    if (chartElement.length) {
                        const tooltip = document.getElementById(canvasId === 'centralMediaChart' ? 'tooltip' : canvasId === 'industryMediaChart' ? 'tooltip2' : 'tooltip3');
                        tooltip.style.display = 'block';
                        tooltip.style.left = event.x + 'px';
                        tooltip.style.top = event.y + 'px';
                    }
                }
            }
        });
    }

    window.onload = () => {
        centralMediaChart = createChart('centralMediaChart', mediaData.initial.central, '央级媒体');
        industryMediaChart = createChart('industryMediaChart', mediaData.initial.industry, '行业媒体');
        localMediaChart = createChart('localMediaChart', mediaData.initial.local, '地方媒体');
    };
</script>

</body>
</html>

